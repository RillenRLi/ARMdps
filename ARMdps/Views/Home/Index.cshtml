@{
    ViewData["Title"] = "Home Page";
}
<div class="main_container">
    <div class="main_menus">
        <div style="display:flex; flex-direction:column;">
            <div class="button_div dropdown">
                <button class="main-button dropdown-toggle" id="dropdownMenuButton" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Системa
                </button>
                <div class="drop_button dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <button class="drop_button dropdown-item" onclick="clickRegionBtn()">Настройка системы</button>
                    <button class="drop_button dropdown-item" onclick="clickUpdateTableBtn()">Версии ПО</button>
                    <button class="drop_button dropdown-item" href="#">Автоматическая выгрузка в ФИС-М</button>
                </div>
            </div>
        </div>
        <div style="display:flex; flex-direction:column;">
            <div class="button_div dropdown">
                <button class="main-button dropdown-toggle" id="dropdownMenuButton" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Справочники
                </button>
                <div class="drop_button dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <button class="drop_button dropdown-item" href="#">Дороги региона</button>
                    <button class="drop_button dropdown-item" href="#">Приборы измерения</button>
                    <button class="drop_button dropdown-item" href="#">КоАП и фабулы нарушения</button>
                    <button class="drop_button dropdown-item" href="#">Пункты ПДД для КоАП</button>
                    <button class="drop_button dropdown-item" href="#">КБК для статей КоАП</button>
                    <button class="drop_button dropdown-item" href="#">Шаблоны печатных форм</button>
                    <button class="drop_button dropdown-item" href="#">Районы населенных пунктов</button>
                    <button class="drop_button dropdown-item" href="#">Специализированные стоянки</button>
                </div>
            </div>
        </div>
        <div style="display:flex; flex-direction:column;">
            <div class="button_div dropdown">
                <button class="main-button dropdown-toggle" id="dropdownMenuButton" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Шаблоны печатных форм
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <button class="dropdown-item" href="#">Подразделения</button>
                    <button class="dropdown-item" href="#">Пользователи</button>
                    <button class="dropdown-item" href="#">Рабочие места</button>
                    <button class="dropdown-item" href="#">Номера материалов</button>
                    <button class="dropdown-item" href="#">Лицензии и сопровождение</button>
                </div>
            </div>
        </div>
        <div style="display:flex; flex-direction:column;">
            <div class="button_div dropdown">
                <button class="main-button dropdown-toggle" id="dropdownMenuButton" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Настройки доступа
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <button class="dropdown-item" onclick="clickDepartmentTableBtn()">Управление подразделениями</button>
                    <button class="dropdown-item" onclick="clickARMUsersTableBtn()">Управление пользователями</button>
                    <button class="dropdown-item" href="#">Рабочие места</button>
                    <button class="dropdown-item" href="#">Номера материалов</button>
                    <button class="dropdown-item" href="#">Лицензии и сопровождение</button>
                </div>
            </div>
        </div>
        <div style="display:flex; flex-direction:column;">
            <div class="button_div dropdown">
                <button class="main-button dropdown-toggle" id="dropdownMenuButton" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Формирование отчётов
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <button class="dropdown-item" href="#">Составленные материалы</button>
                    <button class="dropdown-item" href="#">Выгрузка материалов (файл)</button>
                    <button class="dropdown-item" href="#">Выгрузка материалов (архив)</button>
                </div>
            </div>
        </div>
        <div style="display:flex; flex-direction:column;">
            <div class="button_div dropdown">
                <button class="main-button dropdown-toggle" id="dropdownMenuButton" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Настройки пула материалов
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <button class="dropdown-item" href="#">Материалы за период</button>
                    <button class="dropdown-item" href="#">Постатейный отчет</button>
                </div>
            </div>
        </div>
    </div>
    <div id="example" class="main_view">
    </div>
</div>




@section Scripts
{
<script type="text/javascript">

    //Таблицы

    function updateTable(tableHtml) {
    $('#example').html(tableHtml);
    }

    function updateForm(formHtml) {
    $('#example').html(formHtml);
    }

    function tableDepartmentSuccess(data) {
    updateTable(data);
    //getDepartaments();
    }

    function tableError() {
    alert("Error occured");
    }

    //Версии ПО
    function clickUpdateTableBtn(){
        sendAjaxNotData('@Url.Action("GetUpdateTable", "Update")',tableSuccess, tableError,"POST");
    }
    //Подразделения
    function clickDepartmentTableBtn() {

        sendAjaxNotData('@Url.Action("GetDepartmentTable", "Department")',tableDepartmentSuccess, tableError);
    }
    //Пользователи
    function clickARMUsersTableBtn() {
        sendAjaxNotData('@Url.Action("GetARMUserTable", "ARMUser")', tableSuccess, tableError, "POST")
    }


    function formSuccess(data) {
        updateForm(data);
        getRegion(1);
    }

    function formError() {
    alert("Error occured");
    }

    //Вызов формы редактирования учетных данных
    function clickRegionBtn() {
        sendAjaxNotData('@Url.Action("GetRegionForm","Region")', formSuccess, formError);
    }
    
    //Скрипт для выпадающего списка(чтобы всегда отображался)
    $(document).ready(function () {
    $(".dropdown-toggle").dropdown();
    });
</script>
}
